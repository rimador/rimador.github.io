{"version":3,"file":"script.min.js","sources":["script.js"],"sourcesContent":["const debugLevel = 0; // 0 = Off, 1 = Goatcounter, 2 = Errors, 3 = Logs, 4 = Temps\n\nconst VERSIO_TRANSCRIPCIONS = \"v.2.5\";  // Versió compartida per col_3, col_4 i col_9\n\nconst VERSIONS_FITXERS = {\n  \"col_0.txt\": \"v.2.5\", //paraula\n  \"col_1.txt\": \"v.2.5\", //d'on prové\n  \"col_2.txt\": \"v.2.5\", //codi\n  \"col_3.txt\": VERSIO_TRANSCRIPCIONS, //consonant\n  \"col_4.txt\": VERSIO_TRANSCRIPCIONS, //assonant\n  \"col_5.txt\": \"v.2.5\", //síl·labes\n  \"col_6.txt\": \"v.2.5\", //Vicc\n  \"col_7.txt\": \"v.2.5\", //Viq\n  \"col_8.txt\": \"v.2.5\", //Diec\n  \"col_9.txt\": VERSIO_TRANSCRIPCIONS //transcripció sencera\n  //col_10 - paraula + transcripció\n};\n\nconst Debug = {\n    log: debugLevel >= 3 ? (label) => console.log(`[DEBUG] ${label}`) : () => {},\n    logError: debugLevel >= 2 ? (...args) => console.error('[ERROR]', ...args) : () => {},\n    logTime: debugLevel >= 4 ? (label) => console.time(`[TIMER] ${label}`) : () => {},\n    logTimeEnd: debugLevel >= 4 ? (label) => console.timeEnd(`[TIMER] ${label}`) : () => {},\n    contador: debugLevel >= 1 ? (label) => console.log(`[COUNTER] ${label}`) : () => {},\n};\n\nif (debugLevel >= 3) {\n  window.addEventListener('DOMContentLoaded', () => {\n    const boto = document.getElementById(\"botoNetejarCache\");\n    if (boto) boto.style.display = \"block\";\n  });\n}\n\n\nlet array0, array1, array2, array3, array4, array5, array6, array7, array8, array9;\nlet fitxersLlegits = 0;\nlet nombresDeFitxers = 10;\n\nconst nombresSeleccionats = [0,1,2,3,4,5,6,7,8,9];\nconst camins = nombresSeleccionats.map(i => `diccionaris/separat/col_${i}.txt`);\n\ndocument.addEventListener('DOMContentLoaded', async () => {\n    Debug.logTime('Temps de càrrega');\n    document.getElementById('loader-text2').textContent = `Carregant fitxers (${fitxersLlegits}/${nombresDeFitxers})`;\n\n    try {\n        const resultatFitxers = await Promise.all(camins.map(llegirFitxerAmbIndexedDB));\n        [array0, array1, array2, array3, array4, array5, array6, array7, array8, array9] = resultatFitxers;\n        console.log('Tots els fitxers carregats correctament');\n\n        document.getElementById(\"loader\").style.display = \"none\";\n    } catch (error) {\n        Debug.logError('Error en carregar els fitxers:', error);\n        document.getElementById(\"loader\").style.display = \"none\";\n    } finally {\n        Debug.logTimeEnd('Temps de càrrega');\n    }\n});\n\n// --- FUNCIONS INDEXEDDB ---\nfunction obrirIndexedDB() {\n    return new Promise((resolve, reject) => {\n        const request = indexedDB.open('rimadorDB', 1);\n        request.onerror = () => reject(null);\n        request.onsuccess = () => resolve(request.result);\n        request.onupgradeneeded = (event) => {\n            const db = event.target.result;\n            if (!db.objectStoreNames.contains('fitxers')) {\n                db.createObjectStore('fitxers', { keyPath: 'nom' });\n            }\n        };\n    });\n}\n\nfunction recuperarFitxer(db, nom) {\n    return new Promise((resolve, reject) => {\n        const tx = db.transaction('fitxers', 'readonly');\n        const store = tx.objectStore('fitxers');\n        const req = store.get(nom);\n        req.onsuccess = () => resolve(req.result);\n        req.onerror = () => reject(null);\n    });\n}\n\nfunction guardarFitxer(db, nom, contingut, versio) {\n    return new Promise((resolve, reject) => {\n        const tx = db.transaction('fitxers', 'readwrite');\n        const store = tx.objectStore('fitxers');\n        store.put({ nom, contingut, versio });\n        tx.oncomplete = () => resolve();\n        tx.onerror = () => reject();\n    });\n}\n\n// LECTURA AMB INDEXEDDB + VERSIÓ + BACKUP\nasync function llegirFitxerAmbIndexedDB(rutaFitxer) {\n  const nomFitxer = rutaFitxer.split(\"/\").pop();\n  const versioActual = VERSIONS_FITXERS[nomFitxer] || \"v.1.1\"; // Fallback\n\n  try {\n    const db = await obrirIndexedDB();\n    if (!db) throw new Error(\"IndexedDB no disponible\");\n\n    const fitxerDesat = await recuperarFitxer(db, nomFitxer);\n    Debug.log(`Comparant versions: guardada=${fitxerDesat?.versio}, actual=${versioActual}`);\n\n    if (fitxerDesat && fitxerDesat.versio === versioActual) {\n      console.log(`${nomFitxer} carregat d'IndexedDB`);\n      fitxersLlegits++;\n      document.getElementById(\"loader-text2\").textContent = `Carregant fitxers (${fitxersLlegits}/${nombresDeFitxers})`;\n      return processarFitxerEnParalel(fitxerDesat.contingut);\n    }\n\n    console.log(`${nomFitxer} obsolet o no guardat, fent fetch i guardant arxiu a Indexed`);\n    const contingut = await fetchFitxer(rutaFitxer);\n    await guardarFitxer(db, nomFitxer, contingut, versioActual);\n    Debug.log(`${nomFitxer} guardat a IndexedDB amb nova versió`);\n    fitxersLlegits++;\n    document.getElementById(\"loader-text2\").textContent = `Carregant fitxers (${fitxersLlegits}/${nombresDeFitxers})`;\n    return processarFitxerEnParalel(contingut);\n\n  } catch (err) {\n    Debug.logError(`IndexedDB fallida per ${nomFitxer}, intentant fetch directe`);\n    const errorMsg = document.getElementById(\"error-msg\");\n    if (errorMsg) errorMsg.textContent = `Problema amb cache. Carregant ${nomFitxer} manualment.`;\n\n    const contingut = await fetchFitxer(rutaFitxer);\n    fitxersLlegits++;\n    document.getElementById(\"loader-text2\").textContent = `Carregant fitxers (${fitxersLlegits}/${nombresDeFitxers})`;\n    return processarFitxerEnParalel(contingut);\n  }\n}\n\nfunction processarFitxerEnParalel(contingut) {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve(processarFitxerDeText(contingut));\n    }, 0);\n  });\n}\n\n// FETCH NORMAL\nasync function fetchFitxer(url) {\n    const response = await fetch(url);\n    if (!response.ok) throw new Error(`Error en llegir ${url}`);\n    return await response.text();\n}\n\n// PROCESSAR TXT\nfunction processarFitxerDeText(contingut) {\n    return contingut.split('\\n');\n}\n\n// NETEJAR INDEXEDDB\nfunction netejarIndexedDB() {\n    const request = indexedDB.deleteDatabase('rimadorDB');\n    request.onsuccess = () => console.log('IndexedDB esborrat correctament');\n    request.onerror = () => console.error('Error en esborrar IndexedDB');\n    request.onblocked = () => console.warn(\"L'esborrat d'IndexedDB està bloquejat\");\n}\n  \n// Afegir event listener per la tecla Enter\nconst inputParaula = document.getElementById('paraulaCercada');\ninputParaula.addEventListener('keydown', function(event) {\n  if (event.key === 'Enter') {\n    event.preventDefault();\n    realitzarCerca();\n  }\n});\n\n\n//Botó:\ncercaButton.addEventListener('click', realitzarCerca);\n\nconst CriterisNoms = {\n  ...crearCriteris('Noms', 'N'),\n  ...crearCriteris('Propis', 'NP'),\n  ...crearCriteris('Comuns', 'NC'),\n};\n\nconst CriterisVerbs = {\n  ...crearCriteris('Verbs', 'V'),\n  ...crearCriterisTriples('Indicatiu', 'VAI', 'VSI', 'VMI' ),\n  ...crearCriterisTriples('Subjuntiu', 'VAS', 'VSS', 'VMS'),\n  ...crearCriterisTriples('Imperatiu', 'VAM', 'VSM', 'VMM'),\n  ...crearCriterisTriples('Gerundis', 'VAG', 'VSG', 'VMG'),\n  ...crearCriterisTriples('Participis', 'VAP', 'VSP', 'VMP'),\n  ...crearCriterisTriples('Infinitius', 'VAN', 'VSN', 'VMN'),\n  ...crearCriterisTriples('Condicional', 'VAC', 'VSC', 'VMC' ),\n};\n\nconst CriterisAdjectius = {\n  ...crearCriteris('Adjectius', 'A'),\n  ...crearCriteris('Qualificatius', 'AQ0'),\n  ...crearCriteris('Superlatius', 'AQA'),\n  ...crearCriteris('Ordinals', 'AO'),\n};\n\nconst CriterisPronoms = {\n  ...crearCriteris('Pronoms', 'P'),\n  ...crearCriteris('Demostratius', 'PD'),\n  ...crearCriteris('Indefinits', 'PI'),\n  ...crearCriteris('Interrogatius / Exclamatius', 'PT'),\n  ...crearCriterisDobles('Personals (forts i febles)', 'PP', 'P0'),\n  ...crearCriteris('Possessius', 'PX'),\n  ...crearCriteris('Relatius', 'PR'),\n};\n\nconst CriterisDeterminants = {\n  ...crearCriteris('Determinants', 'D'),\n  ...crearCriteris('Números', 'DN'),\n  ...crearCriteris('Articles', 'DA'),  \n  ...crearCriteris('Relatius', 'DR'),\n  ...crearCriteris('Interrogatius', 'DT'),\n  ...crearCriteris('Demostratius', 'DD'),\n  ...crearCriteris('Exclamatius', 'DE'),\n  ...crearCriteris('Indefinits', 'DI'),\n  ...crearCriteris('Possessius', 'DP'),\n};\n\nconst CriterisAltres = {\n  ...crearCriteris('Altres categories', 'Z'),\n  ...crearCriteris('Adverbis', 'ZR'),\n  ...crearCriteris('Conjuncions', 'ZC'),\n  ...crearCriteris('Interjeccions', 'ZI'),\n  ...crearCriteris('Preposicions', 'ZSPS'),\n  ...crearCriteris('Contraccions', 'ZSP+'),\n  ...crearCriteris('\"etcètera\"', 'ZF'),\n};\n\nfunction crearCriteris(nom, prefix) {  \n  return {\n      [`${nom}`]: {\n          filterFunction: item => item[2].startsWith(`${prefix}`),},};\n\n}\n\nfunction crearCriterisDobles(nom, prefix1, prefix2) {\n  return {\n      [`${nom}`]: {\n          filterFunction: item => item[2].startsWith(prefix1) || item[2].startsWith(prefix2),},};\n}\n\nfunction crearCriterisTriples(nom, prefix1, prefix2, prefix3) {\n  return {\n      [`${nom}`]: {\n          filterFunction: item => item[2].startsWith(prefix1) || item[2].startsWith(prefix2) || item[2].startsWith(prefix3),},};\n}\n\n\n//FUNCIONS\nasync function realitzarCerca() {\n  Debug.log(\"Botó clicat!\");\n  Debug.logTime('realitzarCerca');\n  document.getElementById(\"espai_inicial\").style.display = \"none\";\n\n  try {\n    matches = [];\n    \n    var paraulaCercada = document.getElementById('paraulaCercada').value.trim().toLowerCase();\n    var numeroSeleccionat = document.getElementById('numeroSelector').value;\n    var tipusRima = document.getElementById('rimaSelector').value;\n    var comença = document.getElementById('categoriaSelector').value;\n    var inclourePropis = document.getElementById('nomsPropis').value;\n    var inclourePlurals = document.getElementById('plurals').value;\n    \n    const buscaparaula = buscarParaula(paraulaCercada, numeroSeleccionat, comença, tipusRima, inclourePropis, inclourePlurals, array0, array1, array2, array3, array4, array5, array6, array7, array8, array9);\n    matches = buscaparaula[0];\n    \n    paraulacerca = buscaparaula[1];\n      \n    matches_provisionals = matches.slice();\n\n    actualitzarRimes();\n    var checkboxes = document.querySelectorAll('.clickable-checkbox');\n\n    checkboxes.forEach(function(checkbox) {\n      checkbox.checked = true;\n    });\n\n    mostrarTotesLesLlistes();\n    document.querySelector('.impressio').style.display = 'flex';\n    Debug.logTimeEnd('realitzarCerca');\n  } catch (error) {\n    Debug.logError('Error en realitzar la cerca:', error);\n  }\n}\n\nfunction descriureCategoria(codi) {\n  if (codi.startsWith(\"Y\")) return \"abreviació\";\n  if (codi.startsWith(\"CC\")) return \"conjunció\";\n  if (codi.startsWith(\"SP\")) return \"preposició\";\n  if (codi.startsWith(\"I\")) return \"interjecció\";\n  if (codi.startsWith(\"RG\")) return \"adverbi\";\n  if (codi.startsWith(\"V\")) return \"verb\";\n  if (codi.startsWith(\"N\")) return \"nom\";\n  if (codi.startsWith(\"A\")) return \"adjectiu\";\n  if (codi.startsWith(\"P\")) return \"pronom\";\n  if (codi.startsWith(\"D\")) return \"determinant\";\n  if (codi.startsWith(\"Z\")) return \"altre\";\n  return \"altra categoria\";\n}\n\nfunction buscarParaula(paraulaCercada, numeroSeleccionat, comença, tipusRima, inclourePropis, inclourePlurals, array0, array1, array2, array3, array4, array5, array6, array7, array8, array9) {\n  Debug.logTime('buscarParaula');\n\n  const coincidencies = array0\n    .map((item, index) => ({ paraula: item, index }))\n    .filter(obj => obj.paraula.toLowerCase() === paraulaCercada.toLowerCase());\n\n  if (coincidencies.length === 0) {\n    llistaParaulaCerca = [0, 0, 0, 0, 0, 0, 0, 0, 0];\n    \n  } else if (coincidencies.length === 1) {\n    var indexparaula = coincidencies[0].index;\n    llistaParaulaCerca = [\n      array0[indexparaula], array1[indexparaula], array2[indexparaula],\n      array3[indexparaula], array4[indexparaula], array5[indexparaula],\n      array6[indexparaula], array7[indexparaula], array8[indexparaula], array9[indexparaula]\n    ];\n  } else {\n    const transcripcions = new Set(coincidencies.map(c => array9[c.index]));\n    if (transcripcions.size === 1) {\n      var indexparaula = coincidencies[0].index;\n      llistaParaulaCerca = [\n        array0[indexparaula], array1[indexparaula], array2[indexparaula],\n        array3[indexparaula], array4[indexparaula], array5[indexparaula],\n        array6[indexparaula], array7[indexparaula], array8[indexparaula], array9[indexparaula]\n      ];\n    } else {\n      const ordenat = coincidencies; // pots afegir `.sort(...)` si vols ordenació\n\n      let opcions = coincidencies.map((c, i) => {\n        const index = c.index;\n        const paraula = array0[index];\n        const arrel = array1[index];\n        const categoria = descriureCategoria(array2[index]);\n        const transcripcio = array9[index];\n        return `${i + 1}: ${paraula} (${categoria}, ${arrel}) ${transcripcio.startsWith(\"/\") ? transcripcio : \"/\" + transcripcio + \"/\"}`;\n      }).join(\"\\n\");\n\n      let eleccio = prompt(`Hi ha ${ordenat.length} coincidències per \"${paraulaCercada}\".\\nEscull una opció:\\n\\n${opcions}`);\n\n      let num = parseInt(eleccio);\n      if (!isNaN(num) && num > 0 && num <= ordenat.length) {\n        const indexparaula = ordenat[num - 1].index;\n        llistaParaulaCerca = [\n          array0[indexparaula], array1[indexparaula], array2[indexparaula],\n          array3[indexparaula], array4[indexparaula], array5[indexparaula],\n          array6[indexparaula], array7[indexparaula], array8[indexparaula], array9[indexparaula]\n        ];\n      } else {\n        alert(\"Selecció invàlida. Cerca cancel·lada.\");\n        return [[], [0, 0, 0, 0, 0, 0, 0, 0, 0]];\n      }\n    }\n  }\n\n  \n  \n  for (var i = 0; i < array0.length; i++) {\n    let bona = 1;\n    while (bona === 1) {\n      if (array5[i] !== numeroSeleccionat && numeroSeleccionat !== \"0\" && numeroSeleccionat !== \"5\") {\n        break;\n      }\n\n      if (numeroSeleccionat === \"5\" && parseInt(array5[i]) < 5) {\n        break;\n      }\n\n      if (comença === \"vocal+h\" && !'haeiou'.includes(array0[i][0])) {\n        break;\n      }\n\n      if (comença === \"consonant\" && 'haeiou'.includes(array0[i][0])) {\n        break;\n      }\n\n      if (tipusRima === 'r.consonant') {\n        if (array3[i] !== llistaParaulaCerca[3]) {\n          break;\n        }\n      }\n\n      if (tipusRima === 'r.assonant') {\n        if (array4[i] !== llistaParaulaCerca[4]) {\n          break;\n        }\n      }\n\n      if (inclourePropis === 'no') {\n        if (array2[i][0] === \"N\" && array2[i][1] === \"P\") {\n          break;\n        }\n      }\n\n      if (inclourePlurals === 'no') {\n        if (array2[i][0] === \"D\" && array2[i][4] === \"P\") { //Determinants\n          break;\n        }\n        if (array2[i][0] === \"A\" && array2[i][4] === \"P\") { //Adjectius\n          break;\n        }\n        if (array2[i][0] === \"N\" && array2[i][3] === \"P\") { //Noms\n          break;\n        }\n        if (array2[i][0] === \"P\" && array2[i][4] === \"P\") { //Pronoms\n          break;\n        }\n      }\n      \n      let paraula = [array0[i], array1[i], array2[i], array5[i], array6[i], array7[i], array8[i]] //no cal guardar les rimes (array3 i 4)\n      matches.push(paraula);\n      bona = 0;\n    }\n  }\n  Debug.logTimeEnd('buscarParaula');\n  return [matches, llistaParaulaCerca];\n}\n\nfunction crearEnllacViccionari(paraula) {\n  var enllac_vicc = '<a href=\"https://ca.wiktionary.org/wiki/' + paraula + '\" target=\"_blank\">';\n  enllac_vicc += '<img src=\"./assets/logovicc (240x240).png\" loading=\"lazy\" alt=\"Logo\" class=\"logo\">';\n  enllac_vicc += '</a>';\n  return enllac_vicc;\n}\n\nfunction crearEnllacViquipedia(paraula) {\n  var enllac_viq = '<a href=\"https://ca.wikipedia.org/wiki/' + paraula + '\" target=\"_blank\">';\n  enllac_viq += '<img src=\"./assets/logowiki (263x240).png\" loading=\"lazy\" alt=\"Logo\" class=\"logo\">';\n  enllac_viq += '</a>';\n  return enllac_viq;\n}\n\nfunction crearEnllacDiec(paraula) {\n  var enllac_diec = '<a href=\"https://dlc.iec.cat/Results?DecEntradaText=' + paraula + '&AllInfoMorf=False&OperEntrada=0&OperDef=0&OperEx=0&OperSubEntrada=0&OperAreaTematica=0&InfoMorfType=0&OperCatGram=False&AccentSen=False&CurrentPage=0&refineSearch=0&Actualitzacions=False\" target=\"_blank\">';\n  enllac_diec += '<img src=\"./assets/logodiec (200x200).png\" loading=\"lazy\" alt=\"Logo\" class=\"logo\">';\n  enllac_diec += '</a>';\n  return enllac_diec;\n}\n\n\nfunction actualitzarRimes() {\n  Debug.logTime('actualitzarRimes');\n\n  var numerorimes = \"Nombre de rimes: \" + matches_provisionals.length;\n  document.getElementById(\"nombre\").innerHTML = numerorimes;\n\n  var rimesPerSilabes = {};\n  var rima_enllac = \"\";\n\n  if (matches_provisionals.length > 0) {\n    for (var i = 0; i < matches_provisionals.length; i++) {\n      var parts = matches_provisionals[i];\n      var paraula = parts[0];\n      var paraula_mare = \"\";\n\n      if (parts[2][0] === \"V\") {\n        paraula_mare = \" (\" + parts[1] + \") \";\n      }      \n      var enllac_vicc = \"\";\n      var enllac_viq = \"\";\n      var enllac_diec = \"\";\n\n      if (parts[4] === \"Vicc\") {\n        enllac_vicc = crearEnllacViccionari(parts[1]);\n      }\n\n      if (parts[5] === \"Viq\") {\n        enllac_viq = crearEnllacViquipedia(parts[1]);\n      }\n      \n      if (parts[6] === \"Diec\") {\n        enllac_diec = crearEnllacDiec(parts[1]);\n      }\n\n      var numsilabes = parts[3];\n\n      if (!rimesPerSilabes[numsilabes]) {\n        rimesPerSilabes[numsilabes] = [];\n      }\n\n      rimesPerSilabes[numsilabes].push({ paraula: paraula, paraula_mare: paraula_mare, enllac_vicc: enllac_vicc, enllac_viq: enllac_viq, enllac_diec: enllac_diec });\n    }\n\n    for (var silabes in rimesPerSilabes) {\n      rima_enllac += \"<h3><br>\" + silabes + (silabes > 1 ? \" síl·labes\" : \" síl·laba\") + \":</h3><ul>\";\n      for (var j = 0; j < rimesPerSilabes[silabes].length; j++) {\n        var item = rimesPerSilabes[silabes][j];\n        var enllacText = \"\";\n        \n        if (item.enllac_vicc) {\n          enllacText += item.enllac_vicc + \" \";\n        }\n        if (item.enllac_viq) {\n          enllacText += item.enllac_viq + \" \";\n        }\n        if (item.enllac_diec) {\n          enllacText += item.enllac_diec + \" \";\n        }\n\n        rima_enllac += \"<li><span class='classeParaula'>\" + item.paraula + \"</span><span class='classeParaulaMare'>\" + item.paraula_mare + \"</span> \" + enllacText.trim() + \"</li>\";\n      }\n      rima_enllac += \"</ul>\";\n    }\n    \n  } else {\n    var rimes;\n    if (paraulacerca[0] === 0) {\n      rimes = \"No s'ha trobat la paraula al diccionari.\";\n    } else {\n      rimes = \"No s'han trobat rimes amb aquestes condicions. Ets massa exigent!\";\n    }\n    \n    rima_enllac = \"<ul><li>\" + rimes + \"</li></ul>\";\n  }\n\n  document.getElementById(\"rima_enllac\").innerHTML = rima_enllac;\n\n  Debug.logTimeEnd('actualitzarRimes');\n}\n\n\n\nfunction mostrarTotesLesLlistes() {\n  Debug.logTime('mostrarTotesLesLlistes');\n\n  var resultats = obtenirValorsSegonsPrimerCaracter(matches)\n\n  mostrarLlista('noms', resultats.resultatsN, 'checkbox1');\n  mostrarLlista('adjectius', resultats.resultatsA, 'checkbox2');\n  mostrarLlista('verbs', resultats.resultatsV, 'checkbox3');\n  mostrarLlista('determinants', resultats.resultatsD, 'checkbox4');\n  mostrarLlista('pronoms', resultats.resultatsP, 'checkbox5');\n  mostrarLlista('altres', resultats.resultatsAlt, 'checkbox6');\n\n  Debug.logTimeEnd('mostrarTotesLesLlistes');\n}\n\nfunction mostrarLlista(tipusLlista, elementsAMostrar, checkboxId) {\n  Debug.logTime('mostrarLlista');\n\n  var titleSelector = '#' + checkboxId;\n  var listSelector = '#' + tipusLlista + 'List';\n\n  var listTitle = document.querySelector(titleSelector);\n  var list = document.querySelector(listSelector);\n\n  if (listTitle && list) {\n      listTitle.parentElement.style.display = elementsAMostrar.length > 0 ? 'block' : 'none';\n      list.style.display = elementsAMostrar.length > 0 ? 'block' : 'none';\n\n      var elementsDeLlista = list.querySelectorAll('li');\n\n      elementsDeLlista.forEach(function (element, index) {\n          element.style.display = 'none';\n      });\n\n      elementsAMostrar.forEach(function (indexToShow) {\n          if (indexToShow < elementsDeLlista.length) {\n              elementsDeLlista[indexToShow].style.display = 'list-item';\n          }\n      });\n\n  } else {\n      Debug.log('No es compleixen les condicions per entrar a la lògica principal');\n  }\n  Debug.logTimeEnd('mostrarLlista');\n}\n\nfunction toggleList(listID, checkboxID) {\n  Debug.logTime('toggleList');\n\n  var list = document.getElementById(listID);\n  var checkboxTitle = document.getElementById(checkboxID);\n\n  var checkboxes = list.querySelectorAll('input[type=\"checkbox\"]');\n\n  if (checkboxTitle.checked) {\n    checkboxes.forEach(function (checkbox) {\n      checkbox.checked = true;\n    });\n  } else {\n    checkboxes.forEach(function (checkbox) {\n      checkbox.checked = false;\n    });\n  }\n  Debug.logTimeEnd('toggleList');\n\n}\n\nfunction handleCheckboxClick(event, checkboxCriteria) {\n  Debug.logTime('handleCheckboxClick');\n\n  if (event.target.type === 'checkbox') {\n      const checkboxLabel = event.target.parentNode.innerText.trim();\n\n      if (checkboxLabel in checkboxCriteria) {\n          const { filterFunction } = checkboxCriteria[checkboxLabel];\n\n          if (event.target.checked) {\n              const linesToAdd = matches.filter(filterFunction);\n\n              const uniqueLinesToAdd = linesToAdd.filter(line => !matches_provisionals.includes(line));\n\n              matches_provisionals = matches_provisionals.concat(uniqueLinesToAdd);\n\n              Debug.log(`Checkbox \"${checkboxLabel}\" marcada`);\n          \n          } else {\n              Debug.log(`Checkbox \"${checkboxLabel}\" desclicat`);\n              matches_provisionals = matches_provisionals.filter(item => !filterFunction(item));\n          }\n\n          actualitzarRimes();\n  }   }\n  Debug.logTimeEnd('handleCheckboxClick');\n\n}\n\nfunction obtenirValorsSegonsPrimerCaracter(matches) {\n  Debug.logTime('obtenirValorsSegonsPrimerCaracter');\n\n  var resultatsN = [];\n  var resultatsA = [];\n  var resultatsV = [];\n  var resultatsD = [];\n  var resultatsP = [];\n  var resultatsAlt = [];\n\n  for (var i = 0; i < matches.length; i++) {\n      var terceraColumna = matches[i][2];\n      var primerCaracter = terceraColumna.charAt(0);\n      var segonCaracter = terceraColumna.charAt(1);\n      var tercerCaracter = terceraColumna.charAt(2);\n\n      switch (primerCaracter) {   \n          \n          case \"N\": // Noms\n              switch (segonCaracter) {\n                  case \"P\": resultatsN.push(0); break; // Propis\n                  case \"C\": resultatsN.push(1); break; // Comuns\n              }\n              break;\n\n          case \"A\": // Adjectius\n              switch (segonCaracter) {\n                  case \"Q\": // Adjectius\n                    switch (tercerCaracter) {\n                        case \"0\": resultatsA.push(0); break; // Qualificatius\n                        case \"A\": resultatsA.push(1); break; // Superlatius\n                    }\n                    break;\n                  case \"O\": resultatsA.push(2); break; // Ordinals\n              }\n              break;\n          \n          case \"V\": // Verbs\n              switch (tercerCaracter) {\n                  case \"I\": resultatsV.push(0); break; // Indicatiu\n                  case \"S\": resultatsV.push(1); break; // Subjuntiu\n                  case \"M\": resultatsV.push(2); break; // Imperatiu\n                  case \"G\": resultatsV.push(3); break; // Gerundi\n                  case \"P\": resultatsV.push(4); break; // Participi\n                  case \"N\": resultatsV.push(5); break; // Infinitiu\n                  case \"C\": resultatsV.push(6); break; // Condicional\n\n              }\n              break; \n          \n          case \"D\": // Determinants\n              switch (segonCaracter) {\n                  case \"N\": resultatsD.push(0); break; // Números\n                  case \"A\": resultatsD.push(1); break; // Articles\n                  case \"R\": resultatsD.push(2); break; // Relatius\n                  case \"T\": resultatsD.push(3); break; // Interrogatius\n                  case \"D\": resultatsD.push(4); break; // Demostratius\n                  case \"E\": resultatsD.push(5); break; // Exclamatius\n                  case \"I\": resultatsD.push(6); break; // Indefinits\n                  case \"P\": resultatsD.push(7); break; // Possessius\n              }\n              break;\n\n          case \"P\": // Pronoms\n              switch (segonCaracter) {\n                  case \"D\": resultatsP.push(0); break; // Demostratius\n                  case \"I\": resultatsP.push(1); break; // Indefinits\n                  case \"T\": resultatsP.push(2); break; // Interrogatius / Exclamatius\n                  case \"P\": case \"0\": resultatsP.push(3); break; // Personals\n                  case \"X\": resultatsP.push(4); break; // Possessius\n                  case \"R\": resultatsP.push(5); break; // Relatius\n              }\n              break;\n\n          case \"Z\": // Altres\n              switch (segonCaracter) {\n                  case \"R\": resultatsAlt.push(0); break; // Adverbis\n                  case \"C\": resultatsAlt.push(1); break; // Conjuncions\n                  case \"I\": resultatsAlt.push(2); break; // Interjeccions\n                  case \"F\": resultatsAlt.push(5); break; // \"etcètera\"\n              }\n              switch (tercerCaracter) {\n                  case \"S\": resultatsAlt.push(3); break; // Preposicions\n                  case \"+\": resultatsAlt.push(4); break; // Contraccions\n              }\n              break;\n      }\n  }\n\n  // Retornar les variables amb els resultats\n  Debug.logTimeEnd('obtenirValorsSegonsPrimerCaracter');\n  return {\n      resultatsN: resultatsN,\n      resultatsA: resultatsA,\n      resultatsV: resultatsV,\n      resultatsD: resultatsD,\n      resultatsP: resultatsP,\n      resultatsAlt: resultatsAlt,\n  };\n}\n\n\n//CSS\nwindow.addEventListener('scroll', function() {\n  var container = document.getElementById('container');\n  var checkboxContainer = document.getElementById('checkboxContainer');\n  var separador_rosa2 = document.getElementById('separador_rosa2')\n  \n  var dades_container = container.getBoundingClientRect();\n  \n  if (dades_container.height > 120) {\n    checkboxContainer.style.top = (40 + dades_container.height + 40) + 'px';\n    separador_rosa2.style.top = (40 + dades_container.height) + 'px';\n  }\n  else {\n    checkboxContainer.style.top = '200px';\n    separador_rosa2.style.top = '160px';\n  }\n});\n\n\n//Mostrar i amagar el formulari de contacte\nfunction toggleForm() {\n  var formContainer = document.getElementById(\"formulariContainer\");\n  if (formContainer.style.display === \"none\" || formContainer.style.display === \"\") {\n      formContainer.style.display = \"block\";\n      document.addEventListener(\"click\", closeFormOnClickOutside);\n  } else {\n      formContainer.style.display = \"none\";\n      document.removeEventListener(\"click\", closeFormOnClickOutside);\n  }\n}\n\nfunction closeFormOnClickOutside(event) {\n  var formContainer = document.getElementById(\"formulariContainer\");\n  if (!formContainer.contains(event.target) && event.target.id !== \"mostrarFormulari\") {\n      formContainer.style.display = \"none\";\n      document.removeEventListener(\"click\", closeFormOnClickOutside);\n  }\n}\n"],"names":["debugLevel","VERSIO_TRANSCRIPCIONS","VERSIONS_FITXERS","col_0.txt","col_1.txt","col_2.txt","col_3.txt","col_4.txt","col_5.txt","col_6.txt","col_7.txt","col_8.txt","col_9.txt","Debug","log","console","label","logError","args","error","logTime","time","logTimeEnd","timeEnd","contador","window","addEventListener","boto","document","getElementById","style","display","let","array0","array1","array2","array3","array4","array5","array6","array7","array8","array9","fitxersLlegits","nombresDeFitxers","nombresSeleccionats","camins","map","i","obrirIndexedDB","Promise","resolve","reject","request","indexedDB","open","onerror","onsuccess","result","onupgradeneeded","db","event","target","objectStoreNames","contains","createObjectStore","keyPath","recuperarFitxer","nom","req","transaction","objectStore","get","guardarFitxer","contingut","versio","tx","put","oncomplete","async","llegirFitxerAmbIndexedDB","rutaFitxer","nomFitxer","split","pop","versioActual","await","Error","fitxerDesat","textContent","processarFitxerEnParalel","fetchFitxer","err","errorMsg","setTimeout","processarFitxerDeText","url","response","fetch","ok","text","netejarIndexedDB","deleteDatabase","onblocked","warn","resultatFitxers","all","inputParaula","CriterisNoms","key","preventDefault","realitzarCerca","cercaButton","crearCriteris","CriterisVerbs","crearCriterisTriples","CriterisAdjectius","CriterisPronoms","crearCriterisDobles","CriterisDeterminants","CriterisAltres","prefix","filterFunction","item","startsWith","prefix1","prefix2","prefix3","matches","paraulaCercada","value","trim","toLowerCase","numeroSeleccionat","tipusRima","buscaparaula","buscarParaula","paraulacerca","matches_provisionals","slice","actualitzarRimes","querySelectorAll","forEach","checkbox","checked","mostrarTotesLesLlistes","querySelector","descriureCategoria","codi","comença","inclourePropis","inclourePlurals","coincidencies","index","paraula","filter","obj","length","llistaParaulaCerca","indexparaula","Set","c","size","ordenat","opcions","arrel","categoria","transcripcio","join","eleccio","prompt","num","parseInt","isNaN","alert","bona","includes","push","crearEnllacViccionari","enllac_vicc","crearEnllacViquipedia","enllac_viq","crearEnllacDiec","enllac_diec","numerorimes","rimesPerSilabes","innerHTML","rima_enllac","silabes","parts","paraula_mare","numsilabes","j","enllacText","rimes","resultats","obtenirValorsSegonsPrimerCaracter","mostrarLlista","resultatsN","resultatsA","resultatsV","resultatsD","resultatsP","resultatsAlt","tipusLlista","elementsAMostrar","checkboxId","elementsDeLlista","listSelector","listTitle","list","parentElement","element","indexToShow","toggleList","listID","checkboxID","checkboxTitle","checkboxes","handleCheckboxClick","checkboxCriteria","type","checkboxLabel","parentNode","innerText","uniqueLinesToAdd","line","concat","terceraColumna","primerCaracter","charAt","segonCaracter","tercerCaracter","toggleForm","formContainer","closeFormOnClickOutside","removeEventListener","id","container","checkboxContainer","separador_rosa2","dades_container","getBoundingClientRect","height","top"],"mappings":"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"}