<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="Preguntes Freq√ºents del Rimador en catal√†. Consulta les respostes a dubtes sobre rimes, transcripcions fon√®tiques i m√©s.">
    <meta name="keywords" content="FAQs, preguntes, rimador, catal√†, rimes, dubtes">
    <meta name="author" content="Marc i Ferran">
    <meta property="og:title" content="FAQs - Rimador en Catal√†">
    <meta property="og:description" content="Preguntes Freq√ºents sobre el Rimador en catal√†.">
    <meta property="og:image" content="https://rimador.github.io/assets/R.gif">
    <meta property="og:url" content="https://rimador.github.io/faqs.html">
    <meta property="og:type" content="website">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>FAQs - Rimador en catal√†</title>

    <link rel="shortcut icon" href="https://rimador.github.io/assets/R.gif">
    <link rel="stylesheet" href="./dist/css/styles.min.css">
    
    <style>
        /* FAQs Page Specific Styles */
        
        #faqs-container {
            background-color: #00ffff;
            padding: 20px;
            text-align: left;
            margin: 150px;
            margin-top: 0px;
            margin-bottom: 0px;
            border-radius: 10px;
            display: block;
            position: sticky;
            top: 40px;
            font-weight: lighter;
        }

        #titol_faqs {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            font-size: 2em;
            color: #FF69B4;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .search-faqs-container {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            gap: 10px;
        }

        #search-faqs {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #FF69B4;
            border-radius: 8px;
            font-size: 16px;
            background-color: #ffffff;
            color: #333;
            font-family: Arial, sans-serif;
            transition: all 0.3s ease;
        }

        #search-faqs:focus {
            outline: none;
            border-color: #d975d9;
            box-shadow: 0 0 8px rgba(255, 105, 180, 0.5);
        }

        #search-faqs::placeholder {
            color: #999;
        }

        .search-button-faqs {
            flex-shrink: 0;
            align-items: center;
            background-image: linear-gradient(144deg, #ff0000, #ff7300 11.11%, #fffb00 22.22%, #48ff00 33.33%, #00ffd5 44.44%, #002bff 55.55%, #7a00ff 66.66%, #ff00c8 77.77%, #ff0000);
            border: 0;
            border-radius: 8px;
            box-shadow: rgba(151, 65, 252, 0.2) 0 15px 30px -5px;
            color: #FFFFFF;
            display: flex;
            font-family: Phantomsans, sans-serif;
            font-size: 14px;
            justify-content: center;
            padding: 3px;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
            cursor: pointer;
            width: 120px;
            height: 45px;
        }

        .search-button-faqs span {
            background-color: rgb(5, 6, 45);
            padding: 10px 16px;
            border-radius: 6px;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: 150ms;
        }

        .search-button-faqs:hover span {
            background: none;
            color: rgb(5, 6, 45);
        }

        .accordion-faqs {
            width: 100%;
        }

        .accordion-item {
            background-color: #ffffff;
            margin-bottom: 15px;
            border-radius: 8px;
            border-left: 5px solid #FF69B4;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .accordion-item:hover {
            box-shadow: 0 4px 15px rgba(255, 105, 180, 0.3);
            transform: translateX(5px);
        }

        .accordion-title {
            background: linear-gradient(135deg, #FF69B4 0%, #d975d9 100%);
            color: white;
            padding: 15px 20px;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            user-select: none;
            transition: all 0.3s ease;
            font-family: 'Comic Sans MS', cursive, sans-serif;
        }

        .accordion-title:hover {
            background: linear-gradient(135deg, #d975d9 0%, #b855b3 100%);
            padding-left: 25px;
        }

        .accordion-title::after {
            content: '‚ñº';
            font-size: 14px;
            transition: transform 0.3s ease;
            margin-left: 15px;
        }

        .accordion-item.active .accordion-title::after {
            transform: rotate(180deg);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background-color: #f9f9f9;
        }

        .accordion-item.active .accordion-content {
            max-height: 500px;
            padding: 20px;
        }

        .accordion-content p {
            margin: 10px 0;
            color: #333;
            font-size: 15px;
            line-height: 1.6;
            font-family: Arial, sans-serif;
        }

        .phonetic {
            font-style: italic;
            color: #007BFF;
            font-weight: 500;
            font-family: 'Courier New', monospace;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: #666;
            font-size: 18px;
            font-family: 'Comic Sans MS', cursive, sans-serif;
        }

        #faqs-container p {
            margin: 15px 0;
        }

        @media screen and (max-width: 750px) {
            #faqs-container {
                margin: 100px 20px;
            }

            #titol_faqs {
                font-size: 1.5em;
                letter-spacing: 1px;
            }

            .search-faqs-container {
                flex-direction: column;
                gap: 10px;
            }

            #search-faqs {
                width: 100%;
            }

            .search-button-faqs {
                width: 100%;
            }

            .accordion-title {
                font-size: 14px;
                padding: 12px 15px;
            }

            .accordion-item {
                margin-bottom: 10px;
            }
        }

        @media screen and (max-width: 550px) {
            #faqs-container {
                margin: 80px 10px;
                padding: 15px;
            }

            #titol_faqs {
                font-size: 1.2em;
            }

            .accordion-title {
                font-size: 13px;
                padding: 10px 12px;
            }

            .accordion-content p {
                font-size: 14px;
            }
        }
    </style>
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PRLRBXFC"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <header>
        <a href="https://rimador.github.io"><img class="rimador" src="./assets/Rimador-1.gif" alt="Logo del Rimador en catal√†"></a>
        <img class="peixet" src="./assets/peixet.gif" alt="Peixet decoratiu">
    </header>

    <div id="separador_rosa_nosaltres">
        <p>Preguntes Freq√ºents - Rimador en catal√†</p>
    </div>

    <div id="faqs-container">
        <h1 id="titol_faqs">‚ùì Preguntes Freq√ºents</h1>

        <div class="search-faqs-container">
            <input 
                type="text" 
                id="search-faqs" 
                placeholder="Busca per paraula clau..." 
                onkeyup="searchFAQs()"
            >
            <button class="search-button-faqs" onclick="searchFAQs()">
                <span>üîç Cercar</span>
            </button>
        </div>

        <div class="accordion-faqs" id="accordion-faqs">
            <!-- Q&A items will be dynamically loaded here from JSON -->
        </div>

        <div id="no-results-message" class="no-results" style="display: none;">
            <p>üòî No s'han trobat resultats. Prova amb una altra paraula clau!</p>
        </div>
    </div>

    <footer id="footer">
        <script>
            fetch('html/footer.html')
                .then(res => res.text())
                .then(html => {
                    document.getElementById('footer').innerHTML = html;
                });
        </script>
    </footer>

    <script>
        let allFAQs = [];

        // Load FAQs from JSON
        async function loadFAQs() {
            try {
                const response = await fetch('./faqs_data.json');
                const data = await response.json();
                allFAQs = data.faqs;
                renderFAQs(allFAQs);
            } catch (error) {
                console.error('Error loading FAQs:', error);
                document.getElementById('accordion-faqs').innerHTML = 
                    '<p style="color: red; text-align: center;">Error loading FAQs. Please try again later.</p>';
            }
        }

        // Render FAQs to HTML
        function renderFAQs(faqs) {
            const accordion = document.getElementById('accordion-faqs');
            const noResults = document.getElementById('no-results-message');

            if (faqs.length === 0) {
                accordion.innerHTML = '';
                noResults.style.display = 'block';
                return;
            }

            noResults.style.display = 'none';
            accordion.innerHTML = faqs.map((faq, index) => `
                <div class="accordion-item" data-index="${index}">
                    <div class="accordion-title" onclick="toggleAccordion(this)">
                        ${escapeHtml(faq.question)}
                    </div>
                    <div class="accordion-content">
                        ${faq.answer.split('\n').map(paragraph => {
                            // Convert [phonetic]...[/phonetic] tags to span elements
                            const formatted = paragraph.replace(
                                /\[phonetic\](.*?)\[\/phonetic\]/g,
                                '<span class="phonetic">$1</span>'
                            );
                            return formatted ? `<p>${formatted}</p>` : '';
                        }).join('')}
                    </div>
                </div>
            `).join('');
        }

        // Toggle accordion item
        function toggleAccordion(titleElement) {
            const item = titleElement.closest('.accordion-item');
            
            // Close all other items
            document.querySelectorAll('.accordion-item.active').forEach(openItem => {
                if (openItem !== item) {
                    openItem.classList.remove('active');
                }
            });

            // Toggle current item
            item.classList.toggle('active');
        }

        // Search FAQs
        function searchFAQs() {
            const searchTerm = document.getElementById('search-faqs').value.toLowerCase().trim();

            if (searchTerm === '') {
                renderFAQs(allFAQs);
                return;
            }

            const filtered = allFAQs.filter(faq => 
                faq.question.toLowerCase().includes(searchTerm)
            );

            renderFAQs(filtered);
        }

        // Escape HTML to prevent XSS
        function escapeHtml(text) {
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#039;'
            };
            return text.replace(/[&<>"']/g, m => map[m]);
        }

        // Load FAQs on page load
        document.addEventListener('DOMContentLoaded', loadFAQs);
    </script>
</body>

</html>
